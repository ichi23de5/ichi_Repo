<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
        <record model="ir.ui.view" id="cloud_order_view_form">
	    <field name="name">cloud.order.view.form</field>
	    <field name="model">cloud.order</field>
	    <field name="type">form</field>
	    <field name="arch" type="xml">
	        <form string="TKCLOUD">
                    <header>
                        <button string="Communication Check" type="object" name="check" states="order"/>
                        <button string="Start" type="object" name="start" states="check,stop"/>
                        <button string="Stop" type="object" name="stop" states="work"/>
                        <button string="Finish" type="object" name="finish" states="work,stop"/>
                        <field name="state" widget="statusbar" statusbar_visible="order,check,work,stop,finish"/>
                    </header>
                    <sheet>
		        <div class="oe_title" style="float:left;">
                            <label class="oe_edit_only" string="Property Infomation"/>
                            <h2><field name="property_name" placeholder="Name"/></h2>
                            <field name="property_add"/>
                        </div>
                        <group>
                            <group>
                                <field name="date_cloud"/>
                                <field name="communication_date" attrs="{'invisible': ['|', '|', ('state', '!=', 'order'),('state', '!=', 'check')]}"/>
                                <field name="partner_id"/>
                                <field name="user_id"/>
                            </group>
                            <group>
                                <field name="order_id"/>
                                <field name="sim_id"/>
                                <field name="plan"/>
                                <field name="rate_id"/>
                            </group>
                        </group>
                        <notebook> 
                            <page string="Quotation list">
                                <group>
                                    <group string="DVR">
                                        <field name="dvr1"/>
                                        <field name="cam1" attrs="{'invisible': [('dvr1', '=', False)]}"/>
                                        <field name="hdd1" attrs="{'invisible': [('dvr1', '=', False)]}"/>
                                        <field name="dvr2" attrs="{'invisible': [('dvr1', '=', False)]}"/>
                                        <field name="cam2" attrs="{'invisible': [('dvr2', '=', False)]}"/>
                                        <field name="hdd2" attrs="{'invisible': [('dvr2', '=', False)]}"/>
                                        <field name="dvr3" attrs="{'invisible': [('dvr2', '=', False)]}"/>
                                        <field name="cam3" attrs="{'invisible': [('dvr3', '=', False)]}"/>
                                        <field name="hdd3" attrs="{'invisible': [('dvr3', '=', False)]}"/>
                                        <field name="dvr4" attrs="{'invisible': [('dvr3', '=', False)]}"/>
                                        <field name="cam4" attrs="{'invisible': [('dvr4', '=', False)]}"/>
                                        <field name="hdd4" attrs="{'invisible': [('dvr4', '=', False)]}"/>
                                    </group>
                                    <group string="Memo">
                                        <field name="memo" nolabel="1" placeholder="memo"/>
                                    </group>
                                </group>
                            </page>
                            <page string="Contract">
                                <group>
                                    <group string="Infomation">
                                        <field name="contractor_number" invisible="1"/>
                                        <field name="contractor_pass" invisible="1"/>
                                        <field name="application_date" invisible="1"/>
                                        <field name="end_user" placeholder="end user name"/>
                                        <field name="end_phone" placeholder="end user phone"/>
                                        <field name="contact_check"/>
                                    </group>
                                    <group string="Contraction Date">
                                        <field name="approval_date"/>
                                        <field name="construction_date"/>
                                        <field name="expiration_date" placeholder="auto"/>
                                    </group>
                                </group>
                            </page>
                            <page string="Change and Cancel"> 
                                <group>
                                    <group name="change" string="Change"> 
                                        <field name="changeapp_date"/>
                                    </group> 
                                    <group name="cancel" string="Cancel">
                                        <field name="cancelapp_date"/>
                                        <field name="cancel_date"/>
                                    </group>
                                </group>
                            </page> 
                        </notebook> 
		    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
	    </field>
	</record>

        <record model="ir.ui.view" id="cloud_order_view_tree">
            <field name="name">cloud.order.view.tree</field>
            <field name="model">cloud.order</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="TKCLOUD">
                    <field name="property_name"/>
                    <field name="partner_id"/>
                    <field name="plan"/>
                    <field name="construction_date"/>
                    <field name="expiration_date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="cloud_rate_plan_view_form">
            <field name="name">cloud.rate.plan.view.form</field>
            <field name="model">cloud.rate.plan</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="TKCLOUD Ryokin Plan">
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="method"/>
                        </group>
                        <group>
                            <field name="contract_years"/>
                            <field name="pay_per_use"/>
                        </group>
                    </group>
                </form>
            </field>
        </record>

        <record id="view_order_form_add_cloud" model="ir.ui.view">
            <field name="name">product.template.form.cloud</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_only_form_view"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='is_cloud']" position="after">
                    <field name="rate_id" attrs="{'invisible':[('is_cloud','!=',True)]}"/>                    
                </xpath>
            </field>
        </record>


        <!-- The Action -->
        <record model="ir.actions.act_window" id="cloud_order_view_action">
            <field name="name">TKCLOUD</field>
            <field name="res_model">cloud.order</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name='view_id' ref='cloud_order_view_tree'/>
        </record>

        <!-- Side Menu Sales -->
        <menuitem id="button_menu_cloud" name="CLOUD" 
                  parent="base.menu_sales"
                  sequence="20"/>
        <menuitem id="cloud" action="cloud_order_view_action" 
                  parent="button_menu_cloud"/>



    </data>
</openerp>
